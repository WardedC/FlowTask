<!-- Board View - Kanban con Drag & Drop -->
<div class="min-h-screen p-8">
  
  <!-- Header del Board - Estilo Workspace -->
  <header class="mb-8">
    <div class="flex items-center justify-between">
      <!-- Lado izquierdo: Icono + Título -->
      <div class="flex items-center space-x-4">
        <div class="w-14 h-14 rounded-xl bg-gradient-to-br from-[#0075A2] to-[#6A4C93] flex items-center justify-center shadow-lg">
          <i class="fas fa-columns text-white text-xl"></i>
        </div>
        <div>
          <h1 class="text-2xl font-bold text-gray-800 dark:text-gray-100">Tablero de Proyecto</h1>
          <p class="text-sm text-gray-600 dark:text-gray-400">Gestiona tus tareas con drag & drop</p>
        </div>
      </div>
      
      <!-- Lado derecho: Botones de acción -->
      <div class="flex items-center space-x-3">
        <button class="flex items-center px-4 py-2 text-sm font-medium text-[#0075A2] dark:text-blue-400 bg-white/80 dark:bg-gray-800/80 backdrop-blur-sm rounded-xl border border-white/40 dark:border-gray-600/50 hover:bg-white dark:hover:bg-gray-700 transition-all duration-200 shadow-md">
          <i class="fas fa-filter mr-2"></i>
          Filtrar
        </button>
        <button class="flex items-center px-4 py-2.5 text-sm font-bold text-white bg-[#0075A2] hover:bg-[#005f82] rounded-xl transition-all duration-200 shadow-lg hover:shadow-xl">
          <div class="w-5 h-5 rounded-full bg-white/20 flex items-center justify-center mr-2.5">
            <i class="fas fa-plus text-xs text-white"></i>
          </div>
          <span>Nueva Tarea</span>
        </button>
      </div>
    </div>
  </header>
  
  <!-- Contenedor de Columnas Kanban -->
  <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6">
    
    <!-- Columnas generadas dinámicamente -->
    <!-- 🚀 PERFORMANCE: trackBy evita re-render de todas las columnas -->
    <div *ngFor="let col of columns; let i = index; trackBy: trackByColumnId" class="flex flex-col">
      
      <!-- Columna envuelta en card estilo workspace -->
      <div class="bg-white dark:bg-gray-800 rounded-2xl shadow-lg overflow-hidden flex flex-col transition-all duration-300 hover:shadow-xl">
        
        <!-- Header de columna h-16 con icono -->
        <div class="relative h-16 bg-white dark:bg-gray-800 border-b border-gray-200 dark:border-gray-700">
          <div class="absolute inset-0 flex items-center justify-between px-5">
            <div class="flex items-center gap-3">
              <!-- Icono de columna con color dinámico -->
              <div class="w-8 h-8 rounded-lg flex items-center justify-center shadow-md" 
                   [ngClass]="getColumnColorClass(i)">
                <i class="fas fa-grip-vertical text-white text-xs"></i>
              </div>
              <h2 class="text-base font-bold text-gray-800 dark:text-gray-100">{{ col.title }}</h2>
              <span class="px-3 py-1 text-sm font-bold rounded-full shadow-sm" 
                    [ngClass]="getColumnBadgeClass(i)">
                {{ col.cards.length }}
              </span>
            </div>
            <button class="w-8 h-8 flex items-center justify-center text-gray-400 hover:text-gray-600 dark:hover:text-gray-300 transition-colors rounded-lg hover:bg-gray-100 dark:hover:bg-gray-700">
              <i class="fas fa-ellipsis-h"></i>
            </button>
          </div>
        </div>
        
        <!-- Drop zone SIN border dashed, fondo limpio -->
        <div cdkDropList
             [id]="'cdk-drop-list-' + i"
             [cdkDropListData]="col.cards"
             [cdkDropListConnectedTo]="getConnectedLists()"
             (cdkDropListDropped)="drop($event)"
             class="drop-zone flex-1 p-4 bg-gray-50 dark:bg-gray-900/30 min-h-[500px] space-y-3">
        
        <!-- Tarjetas -->
        <!-- 🚀 PERFORMANCE: trackBy es CRÍTICO - sin esto, Angular re-crea todas las tarjetas -->
        <div *ngFor="let card of col.cards; trackBy: trackByCardId"
             cdkDrag
             (cdkDragStarted)="onDragStarted($event)"
             (cdkDragEnded)="onDragEnded($event)"
             class="card-item group bg-white dark:bg-gray-800 rounded-xl p-4 border border-gray-200 dark:border-gray-700 shadow-sm hover:shadow-md transition-all duration-200"
             [attr.data-column-index]="i">
          
          <!-- Contenido de la tarjeta (visible siempre) -->
          <div class="flex items-start justify-between mb-2">
            <div class="flex items-center gap-2">
              <div class="w-1 h-8 rounded-full" [ngClass]="getColumnBarClass(i)"></div>
              <div class="text-sm font-semibold text-gray-800 dark:text-white">{{ card.title }}</div>
            </div>
            <i class="fas fa-grip-vertical text-gray-300 transition-colors" 
               [ngClass]="getColumnGripClass(i)"></i>
          </div>
          
          <p class="text-xs text-gray-500 dark:text-gray-400 ml-3" *ngIf="card.desc">{{ card.desc }}</p>
          
          <!-- Card Footer -->
          <div class="flex items-center justify-between mt-3 pt-3 border-t border-gray-100 dark:border-gray-700">
            <div class="flex -space-x-2">
              <div class="w-6 h-6 rounded-full border-2 border-white dark:border-gray-800"
                   [ngClass]="getColumnAvatarClass(i)"></div>
            </div>
            <div class="flex gap-2 text-xs text-gray-400">
              <span class="flex items-center gap-1"><i class="far fa-comment"></i> 0</span>
              <span class="flex items-center gap-1"><i class="far fa-check-square"></i> 0/0</span>
            </div>
          </div>

          <!-- ✨ DRAG PREVIEW: Diseño IDÉNTICO a la tarjeta original -->
          <div *cdkDragPreview class="drag-preview bg-white dark:bg-gray-800 rounded-xl p-4 border border-gray-200 dark:border-gray-700 shadow-lg">
            <!-- Header del preview -->
            <div class="flex items-start justify-between mb-2">
              <div class="flex items-center gap-2">
                <div class="w-1 h-8 rounded-full" [ngClass]="getColumnBarClass(i)"></div>
                <div class="text-sm font-semibold text-gray-800 dark:text-white">{{ card.title }}</div>
              </div>
              <i class="fas fa-grip-vertical text-gray-300" [ngClass]="getColumnGripClass(i)"></i>
            </div>
            
            <!-- Descripción -->
            <p class="text-xs text-gray-500 dark:text-gray-400 ml-3" *ngIf="card.desc">{{ card.desc }}</p>
            
            <!-- Footer del preview - IGUAL a la tarjeta original -->
            <div class="flex items-center justify-between mt-3 pt-3 border-t border-gray-100 dark:border-gray-700">
              <div class="flex -space-x-2">
                <div class="w-6 h-6 rounded-full border-2 border-white dark:border-gray-800"
                     [ngClass]="getColumnAvatarClass(i)"></div>
              </div>
              <div class="flex gap-2 text-xs text-gray-400">
                <span class="flex items-center gap-1"><i class="far fa-comment"></i> 0</span>
                <span class="flex items-center gap-1"><i class="far fa-check-square"></i> 0/0</span>
              </div>
            </div>
          </div>

          <!-- ✨ PLACEHOLDER: Muestra el espacio vacío mientras se arrastra -->
          <!-- 🚀 PERFORMANCE: Estático, sin cálculos complejos -->
          <div *cdkDragPlaceholder class="drag-placeholder bg-blue-50 dark:bg-blue-900/20 rounded-xl border-2 border-dashed border-blue-300 dark:border-blue-600 h-24 opacity-60 flex items-center justify-center">
            <span class="text-xs text-blue-400 dark:text-blue-500 font-medium">Suelta aquí</span>
          </div>
        </div>
        
      </div>
      <!-- Fin del contenedor card de columna -->
      
    </div>
    <!-- Fin del loop de columnas -->

  </div>
  <!-- Fin del grid de columnas -->
  
</div>
<!-- Fin del contenedor principal -->
